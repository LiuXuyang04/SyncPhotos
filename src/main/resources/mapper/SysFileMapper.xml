<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.syncphotos.mapper.SysFileMapper">
    <resultMap id="sysFileMap" type="cn.syncphotos.entity.SysFile">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="originalName" column="original_name"/>
        <result property="fileSize" column="file_size"/>
        <result property="fileType" column="file_type"/>
        <result property="md5hex" column="md5hex"/>
        <result property="delFlag" column="del_flag"/>
    </resultMap>

    <resultMap id="fileInfoVO" type="cn.syncphotos.vo.FileInfoVO">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="originalName" column="original_name"/>
        <result property="fileSize" column="file_size"/>
        <result property="fileType" column="file_type"/>
        <result property="latitude" column="latitude"/>
        <result property="longitude" column="longitude"/>
        <result property="camera" column="camera"/>
        <result property="duration" column="duration"/>
        <result property="originTime" column="origin_time"/>
        <result property="resolution" column="resolution"/>
    </resultMap>

    <select id="findPage" resultMap="fileInfoVO">
        SELECT file.id,
               file.name,
               file.original_name,
               file.file_size,
               file.file_type,
               file_exif.latitude,
               file_exif.longitude,
               file_exif.camera,
               file_exif.origin_time,
               file_exif.resolution,
               file_exif.duration
        FROM file
                 LEFT JOIN file_exif ON file_exif.file_id = file.id
        WHERE del_flag = '0'
        ORDER BY file_exif.origin_time desc
    </select>
</mapper>